/**
 * Stores reward vault transfer observations and distribution lifecycle states.
 * Used by app.module and modules/market-making rewards/reconciliation services.
 */
import { Column, Entity, PrimaryColumn } from 'typeorm';

export type RewardLedgerStatus =
  | 'OBSERVED'
  | 'CONFIRMED'
  | 'TRANSFERRING_TO_MIXIN'
  | 'TRANSFERRED_TO_MIXIN'
  | 'DISTRIBUTED';

@Entity()
export class RewardLedger {
  @PrimaryColumn()
  txHash: string;

  @Column()
  token: string;

  @Column()
  amount: string;

  @Column()
  campaignId: string;

  @Column()
  dayIndex: number;

  @Column()
  status: RewardLedgerStatus;

  @Column()
  observedAt: string;

  @Column({ nullable: true })
  confirmedAt?: string;

  @Column({ nullable: true })
  distributedAt?: string;
}
